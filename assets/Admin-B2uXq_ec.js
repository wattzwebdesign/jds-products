import{r as d,j as I,c as n,a as e,f as C,g as S,h as b,b as u,t as o,w as f,s as P,x as _,o as r,e as B}from"./index-DoJVvKji.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"admin-page"},E={class:"header"},z={class:"header-content"},D={class:"main-content"},N={class:"import-section"},T={key:0,class:"stats-grid"},V={class:"stat-card"},j={class:"stat-value"},A={class:"stat-card"},L={class:"stat-value"},H={class:"stat-card"},U={class:"stat-value"},W={key:0,class:"upload-placeholder"},J={key:1,class:"file-selected"},K={class:"filename"},R={class:"filesize"},q=["disabled"],G={key:0,class:"import-stats"},O={key:0},Q={key:3,class:"error-message"},X={__name:"Admin",setup(Y){const p=d(null),a=d(null),c=d(!1),l=d(null),i=d(""),v=d(null),m=async()=>{try{v.value=await _.getImportStats()}catch(t){console.error("Failed to load stats:",t)}},h=()=>{c.value||p.value?.click()},k=t=>{const s=t.target.files[0];s&&(a.value=s,l.value=null,i.value="")},x=t=>{const s=t.dataTransfer.files[0];s&&(s.name.endsWith(".xlsx")||s.name.endsWith(".xls"))?(a.value=s,l.value=null,i.value=""):i.value="Please drop a valid Excel file (.xlsx or .xls)"},g=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB",y=async()=>{if(a.value){c.value=!0,i.value="",l.value=null;try{const t=await _.importProducts(a.value);l.value=t,t.success&&(await m(),a.value=null,p.value.value="")}catch(t){i.value=t.response?.data?.message||"Import failed. Please try again."}finally{c.value=!1}}};return I(()=>{m()}),(t,s)=>{const w=b("router-link");return r(),n("div",M,[e("header",E,[e("div",z,[s[2]||(s[2]=e("h1",null,"Admin - Product Import",-1)),C(w,{to:"/products",class:"btn btn-secondary"},{default:S(()=>[...s[1]||(s[1]=[B("← Back to Products",-1)])]),_:1})])]),e("main",D,[e("div",N,[s[8]||(s[8]=e("h2",null,"Import Products from Excel",-1)),s[9]||(s[9]=e("p",{class:"instructions"}," Upload an Excel file (.xlsx or .xls) with your JDS product catalog. The system will import all products into the searchable database. ",-1)),v.value?(r(),n("div",T,[e("div",V,[e("div",j,o(v.value.totalProducts?.toLocaleString()||0),1),s[3]||(s[3]=e("div",{class:"stat-label"},"Total Products",-1))]),e("div",A,[e("div",L,o(v.value.inStockCount?.toLocaleString()||0),1),s[4]||(s[4]=e("div",{class:"stat-label"},"In Stock",-1))]),e("div",H,[e("div",U,o(v.value.localStockCount?.toLocaleString()||0),1),s[5]||(s[5]=e("div",{class:"stat-label"},"Local Stock",-1))])])):u("",!0),e("div",{class:"upload-area",onClick:h,onDrop:f(x,["prevent"]),onDragover:s[0]||(s[0]=f(()=>{},["prevent"]))},[e("input",{ref_key:"fileInput",ref:p,type:"file",accept:".xlsx,.xls",onChange:k,style:{display:"none"}},null,544),a.value?(r(),n("div",J,[s[7]||(s[7]=e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"14 2 14 8 20 8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("p",K,o(a.value.name),1),e("p",R,o(g(a.value.size)),1)])):(r(),n("div",W,[...s[6]||(s[6]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"Click to select or drag and drop your Excel file here",-1),e("span",{class:"file-types"},".xlsx or .xls files only",-1)])]))],32),a.value?(r(),n("button",{key:1,onClick:y,class:"btn btn-primary",disabled:c.value},o(c.value?"Importing...":"Import Products"),9,q)):u("",!0),l.value?(r(),n("div",{key:2,class:P(["result-message",l.value.success?"success":"error"])},[e("h3",null,o(l.value.success?"✓ Import Complete":"✗ Import Failed"),1),e("p",null,o(l.value.message),1),l.value.success?(r(),n("div",G,[e("span",null,"Total: "+o(l.value.total),1),e("span",null,"New: "+o(l.value.imported),1),e("span",null,"Updated: "+o(l.value.updated),1),l.value.errors>0?(r(),n("span",O,"Errors: "+o(l.value.errors),1)):u("",!0)])):u("",!0)],2)):u("",!0),i.value?(r(),n("div",Q,o(i.value),1)):u("",!0)])])])}}},ee=F(X,[["__scopeId","data-v-bf2187be"]]);export{ee as default};
