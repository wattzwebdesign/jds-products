import{u as L,r as u,c as B,b as a,y as P,d as s,h as c,x as w,i as D,v as V,t as l,s as M,z as N,F as U,k as A,C as E,m as I,q as o,p as S}from"./index-BFL3Z2co.js";import{P as K}from"./ProductCard-DkhC7HUM.js";import{A as R}from"./AppHeader-DgyXVZIe.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"product-lookup"},q={class:"main-content"},z={class:"search-section"},W=["disabled"],j={key:0,class:"error-message"},H={key:1,class:"warning-message"},X={key:0,class:"results-section"},G={class:"results-header"},J={class:"results-count"},O={key:0,class:"save-section"},Q={class:"save-info"},Y=["disabled"],Z={class:"products-grid"},ss={key:0,class:"database-badge not-in-db"},es={key:1,class:"database-badge in-db"},ts={key:1,class:"no-results"},as={key:0,class:"loading-live"},ls={key:1,class:"live-product-details"},os={class:"sku"},ns={class:"inventory-section"},is={class:"inventory-grid"},us={class:"inventory-item"},rs={class:"value"},ds={class:"inventory-item"},cs={class:"value"},vs={key:0,class:"pricing-section"},ps={class:"pricing-grid"},hs={class:"price-item"},gs={class:"value"},ms={__name:"ProductLookup",setup(_s){I(),L();const g=u(""),r=u([]),p=u(null),m=u(""),h=u(!1),b=u(!1),_=u(!1),d=u(null),v=B(()=>r.value.filter(t=>!t.inDatabase)),x=async()=>{m.value="",d.value=null,h.value=!0,b.value=!0;try{const t=await S.lookupBySKUs(g.value);p.value=t,r.value=t.products||[],window.fathom&&t.requestedCount&&window.fathom.trackEvent("SKU Lookup",{_site_id:"UMVXBRTN",_value:t.requestedCount})}catch(t){m.value=t.response?.data?.error||"Failed to search products. Please try again.",r.value=[]}finally{h.value=!1}},C=async()=>{_.value=!0,d.value=null;try{const t=v.value.map(n=>n.sku),e=await E.addMissingProducts(t);d.value=e,e.success&&(r.value=r.value.map(n=>t.includes(n.sku)?{...n,inDatabase:!0}:n))}catch(t){d.value={success:!1,message:t.response?.data?.error||"Failed to save products. Please try again."}}finally{_.value=!1}},y=u(null),i=u(null),k=u(!1),F=async t=>{y.value=t,k.value=!0,i.value=null;try{const e=await S.getLiveProduct(t.sku);i.value=e.product}catch(e){console.error("Failed to fetch live product:",e),i.value=t}finally{k.value=!1}},f=()=>{y.value=null,i.value=null};return(t,e)=>(o(),a("div",$,[P(R),s("main",q,[s("div",z,[e[3]||(e[3]=s("h2",null,"Enter SKU Codes",-1)),e[4]||(e[4]=s("p",{class:"search-instructions"}," Enter one or more SKU codes (comma-separated, space-separated, or on separate lines) ",-1)),s("form",{onSubmit:w(x,["prevent"])},[D(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),placeholder:`Example: LPB004, LWB101
or
LPB004
LWB101`,rows:"4",class:"sku-input"},null,512),[[V,g.value]]),s("button",{type:"submit",class:"btn btn-primary",disabled:h.value||!g.value.trim()},l(h.value?"Searching...":"Search Products"),9,W)],32),m.value?(o(),a("div",j,l(m.value),1)):c("",!0),p.value&&p.value.notFound&&p.value.notFound.length>0?(o(),a("div",H,[e[2]||(e[2]=s("strong",null,"Not Found:",-1)),M(" "+l(p.value.notFound.join(", ")),1)])):c("",!0)]),r.value.length>0?(o(),a("div",X,[s("div",G,[e[5]||(e[5]=s("h2",null,"Results",-1)),s("span",J,l(r.value.length)+" product"+l(r.value.length!==1?"s":"")+" found",1)]),v.value.length>0?(o(),a("div",O,[s("div",Q,[e[6]||(e[6]=s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),s("line",{x1:"12",y1:"8",x2:"12",y2:"12","stroke-width":"2","stroke-linecap":"round"}),s("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","stroke-width":"2","stroke-linecap":"round"})],-1)),s("span",null,l(v.value.length)+" product"+l(v.value.length!==1?"s":"")+" not in database",1)]),s("button",{onClick:C,class:"btn btn-save",disabled:_.value},l(_.value?"Saving...":`Save ${v.value.length} Missing Product${v.value.length!==1?"s":""}`),9,Y)])):c("",!0),d.value?(o(),a("div",{key:1,class:N(["save-result",d.value.success?"success":"error"])},[s("strong",null,l(d.value.success?"✓ Success":"✗ Error"),1),s("p",null,l(d.value.message),1)],2)):c("",!0),s("div",Z,[(o(!0),a(U,null,A(r.value,n=>(o(),a("div",{key:n.sku,class:"product-wrapper"},[n.inDatabase?(o(),a("div",es," In Database ")):(o(),a("div",ss," Not in Database ")),P(K,{product:n,onViewDetails:ys=>F(n)},null,8,["product","onViewDetails"])]))),128))])])):b.value&&!h.value?(o(),a("div",ts,[...e[7]||(e[7]=[s("p",null,"No products found. Please check your SKU codes and try again.",-1)])])):c("",!0)]),y.value?(o(),a("div",{key:0,class:"modal-overlay",onClick:f},[s("div",{class:"modal-content",onClick:e[1]||(e[1]=w(()=>{},["stop"]))},[s("button",{onClick:f,class:"modal-close"},"×"),k.value?(o(),a("div",as,[...e[8]||(e[8]=[s("div",{class:"spinner"},null,-1),s("p",null,"Fetching live inventory & pricing...",-1)])])):i.value?(o(),a("div",ls,[s("h2",null,l(i.value.name),1),s("p",os,"SKU: "+l(i.value.sku),1),s("div",ns,[e[11]||(e[11]=s("h3",null,"Inventory",-1)),s("div",is,[s("div",us,[e[9]||(e[9]=s("span",{class:"label"},"Available:",-1)),s("span",rs,l(i.value.availability?.available||0),1)]),s("div",ds,[e[10]||(e[10]=s("span",{class:"label"},"Local:",-1)),s("span",cs,l(i.value.availability?.local||0),1)])])]),i.value.pricing?(o(),a("div",vs,[e[13]||(e[13]=s("h3",null,"Pricing",-1)),s("div",ps,[s("div",hs,[e[12]||(e[12]=s("span",{class:"label"},"Price:",-1)),s("span",gs,"$"+l(i.value.pricing?.price?.toFixed(2)||"0.00"),1)])])])):c("",!0)])):c("",!0)])])):c("",!0)]))}},ws=T(ms,[["__scopeId","data-v-d4803b34"]]);export{ws as default};
