import{u as L,r as u,c as B,b as t,y as P,d as s,h as c,x as S,i as D,v as V,t as l,s as M,z as N,F as A,k as I,C as U,m as E,q as o,p as w}from"./index-Dp40NKl1.js";import{P as K}from"./ProductCard-DyV9leTP.js";import{A as R}from"./AppHeader-BNzQW3uF.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"product-lookup"},z={class:"main-content"},W={class:"search-section"},j=["disabled"],q={key:0,class:"error-message"},H={key:1,class:"warning-message"},G={key:0,class:"results-section"},J={class:"results-header"},O={class:"results-count"},Q={key:0,class:"save-section"},X={class:"save-info"},Y=["disabled"],Z={class:"products-grid"},ss={key:0,class:"database-badge not-in-db"},es={key:1,class:"database-badge in-db"},as={key:1,class:"no-results"},ts={key:0,class:"loading-live"},ls={key:1,class:"live-product-details"},os={class:"sku"},ns={class:"inventory-section"},is={class:"inventory-grid"},us={class:"inventory-item"},rs={class:"value"},ds={class:"inventory-item"},cs={class:"value"},vs={key:0,class:"pricing-section"},ps={class:"pricing-grid"},gs={class:"price-item"},hs={class:"value"},ys={__name:"ProductLookup",setup(ms){E(),L();const h=u(""),r=u([]),p=u(null),y=u(""),g=u(!1),b=u(!1),m=u(!1),d=u(null),v=B(()=>r.value.filter(a=>!a.inDatabase)),x=async()=>{y.value="",d.value=null,g.value=!0,b.value=!0;try{const a=await w.lookupBySKUs(h.value);p.value=a,r.value=a.products||[]}catch(a){y.value=a.response?.data?.error||"Failed to search products. Please try again.",r.value=[]}finally{g.value=!1}},F=async()=>{m.value=!0,d.value=null;try{const a=v.value.map(n=>n.sku),e=await U.addMissingProducts(a);d.value=e,e.success&&(r.value=r.value.map(n=>a.includes(n.sku)?{...n,inDatabase:!0}:n))}catch(a){d.value={success:!1,message:a.response?.data?.error||"Failed to save products. Please try again."}}finally{m.value=!1}},_=u(null),i=u(null),k=u(!1),C=async a=>{_.value=a,k.value=!0,i.value=null;try{const e=await w.getLiveProduct(a.sku);i.value=e.product}catch(e){console.error("Failed to fetch live product:",e),i.value=a}finally{k.value=!1}},f=()=>{_.value=null,i.value=null};return(a,e)=>(o(),t("div",T,[P(R),s("main",z,[s("div",W,[e[3]||(e[3]=s("h2",null,"Enter SKU Codes",-1)),e[4]||(e[4]=s("p",{class:"search-instructions"}," Enter one or more SKU codes (comma-separated, space-separated, or on separate lines) ",-1)),s("form",{onSubmit:S(x,["prevent"])},[D(s("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>h.value=n),placeholder:`Example: LPB004, LWB101
or
LPB004
LWB101`,rows:"4",class:"sku-input"},null,512),[[V,h.value]]),s("button",{type:"submit",class:"btn btn-primary",disabled:g.value||!h.value.trim()},l(g.value?"Searching...":"Search Products"),9,j)],32),y.value?(o(),t("div",q,l(y.value),1)):c("",!0),p.value&&p.value.notFound&&p.value.notFound.length>0?(o(),t("div",H,[e[2]||(e[2]=s("strong",null,"Not Found:",-1)),M(" "+l(p.value.notFound.join(", ")),1)])):c("",!0)]),r.value.length>0?(o(),t("div",G,[s("div",J,[e[5]||(e[5]=s("h2",null,"Results",-1)),s("span",O,l(r.value.length)+" product"+l(r.value.length!==1?"s":"")+" found",1)]),v.value.length>0?(o(),t("div",Q,[s("div",X,[e[6]||(e[6]=s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),s("line",{x1:"12",y1:"8",x2:"12",y2:"12","stroke-width":"2","stroke-linecap":"round"}),s("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","stroke-width":"2","stroke-linecap":"round"})],-1)),s("span",null,l(v.value.length)+" product"+l(v.value.length!==1?"s":"")+" not in database",1)]),s("button",{onClick:F,class:"btn btn-save",disabled:m.value},l(m.value?"Saving...":`Save ${v.value.length} Missing Product${v.value.length!==1?"s":""}`),9,Y)])):c("",!0),d.value?(o(),t("div",{key:1,class:N(["save-result",d.value.success?"success":"error"])},[s("strong",null,l(d.value.success?"✓ Success":"✗ Error"),1),s("p",null,l(d.value.message),1)],2)):c("",!0),s("div",Z,[(o(!0),t(A,null,I(r.value,n=>(o(),t("div",{key:n.sku,class:"product-wrapper"},[n.inDatabase?(o(),t("div",es," In Database ")):(o(),t("div",ss," Not in Database ")),P(K,{product:n,onViewDetails:_s=>C(n)},null,8,["product","onViewDetails"])]))),128))])])):b.value&&!g.value?(o(),t("div",as,[...e[7]||(e[7]=[s("p",null,"No products found. Please check your SKU codes and try again.",-1)])])):c("",!0)]),_.value?(o(),t("div",{key:0,class:"modal-overlay",onClick:f},[s("div",{class:"modal-content",onClick:e[1]||(e[1]=S(()=>{},["stop"]))},[s("button",{onClick:f,class:"modal-close"},"×"),k.value?(o(),t("div",ts,[...e[8]||(e[8]=[s("div",{class:"spinner"},null,-1),s("p",null,"Fetching live inventory & pricing...",-1)])])):i.value?(o(),t("div",ls,[s("h2",null,l(i.value.name),1),s("p",os,"SKU: "+l(i.value.sku),1),s("div",ns,[e[11]||(e[11]=s("h3",null,"Inventory",-1)),s("div",is,[s("div",us,[e[9]||(e[9]=s("span",{class:"label"},"Available:",-1)),s("span",rs,l(i.value.availability?.available||0),1)]),s("div",ds,[e[10]||(e[10]=s("span",{class:"label"},"Local:",-1)),s("span",cs,l(i.value.availability?.local||0),1)])])]),i.value.pricing?(o(),t("div",vs,[e[13]||(e[13]=s("h3",null,"Pricing",-1)),s("div",ps,[s("div",gs,[e[12]||(e[12]=s("span",{class:"label"},"Price:",-1)),s("span",hs,"$"+l(i.value.pricing?.price?.toFixed(2)||"0.00"),1)])])])):c("",!0)])):c("",!0)])])):c("",!0)]))}},Ss=$(ys,[["__scopeId","data-v-46a06999"]]);export{Ss as default};
