import{u as O,r as u,c as W,o as j,a as Q,b as n,d as o,e as _,f as J,w as R,g as X,h as y,i as x,v as B,j as Z,F as T,k as I,n as D,t as v,l as ee,p as N,m as oe,q as a,s as G,x as te}from"./index-XsG47L7B.js";import{P as se}from"./ProductCard-Dgc80mJr.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"product-search"},re={class:"header"},ne={class:"header-content"},ie={class:"user-info"},ue={class:"main-content"},ce={class:"search-header"},de={class:"search-box"},ve={key:0,class:"filters-panel"},pe={class:"filter-section"},he={class:"color-search-container"},fe={key:1,class:"color-dropdown"},ye=["onMousedown"],ge={class:"color-name"},be={class:"color-count"},Ce={key:0,class:"color-swatch-display"},ke=["title"],me={class:"selected-color-name"},we={key:1,class:"loading"},Fe={key:2,class:"error-message"},_e={key:3},xe={class:"results-header"},Ee={class:"results-count"},Se={class:"products-grid"},Le={key:0,class:"pagination"},Pe={class:"pagination-controls"},Ae=["disabled"],Re={class:"page-info"},Be=["disabled"],Te={class:"items-per-page"},Ie={key:4,class:"no-results"},De={key:5,class:"welcome"},Ne={__name:"PublicProductSearch",setup(Ge){const U=oe(),g=Q(),q=O(),p=u(""),k=u(!1),i=u(""),c=u(""),d=u(!1),m=u([]),b=u([]),l=u({page:1,limit:20,total:0,totalPages:0}),w=u(!1),E=u(!1),C=u("");let S=null;const L=W(()=>{if(!c.value||c.value.length<3)return[];const s=c.value.toLowerCase(),e=m.value.filter(r=>r.color.toLowerCase().includes(s)).slice(0,20);return console.log("Color search:",{query:c.value,availableColorsCount:m.value.length,filteredCount:e.length,showDropdown:d.value}),e}),h=async(s=1,e=!0)=>{w.value=!0,C.value="",E.value=!0;try{const r={};i.value&&(r.color=i.value);const t=await N.search(p.value,r,s,l.value.limit);if(b.value=t.products||[],l.value=t.pagination||l.value,e){const f={};p.value&&(f.q=p.value),i.value&&(f.color=i.value),s>1&&(f.page=s),l.value.limit!==20&&(f.limit=l.value.limit),U.replace({query:f})}}catch(r){C.value=r.response?.data?.message||"Search failed. Please try again.",b.value=[]}finally{w.value=!1}},V=()=>{clearTimeout(S),S=setTimeout(()=>{h(1)},500)},P=s=>{s>=1&&s<=l.value.totalPages&&(h(s),window.scrollTo({top:0,behavior:"smooth"}))},M=()=>{h(1),window.scrollTo({top:0,behavior:"smooth"})},K=()=>{c.value.length>=3?d.value=!0:d.value=!1},Y=()=>{setTimeout(()=>{d.value=!1},200)},H=s=>{i.value=s,c.value=s,d.value=!1,h(1),window.scrollTo({top:0,behavior:"smooth"})},$=()=>{i.value="",c.value="",d.value=!1,h(1),window.scrollTo({top:0,behavior:"smooth"})},z=async()=>{try{const s=await N.getColors();m.value=s.colors||[]}catch(s){console.error("Failed to load colors:",s)}},F={BLACK:"#000000",WHITE:"#FFFFFF",RED:"#FF0000",BLUE:"#0000FF",GREEN:"#008000",YELLOW:"#FFFF00",ORANGE:"#FFA500",PURPLE:"#800080",PINK:"#FFC0CB",BROWN:"#8B4513",GRAY:"#808080",GREY:"#808080",SILVER:"#C0C0C0",GOLD:"#FFD700",CLEAR:"#FFFFFF",TRANSPARENT:"#FFFFFF","LIGHT BLUE":"#ADD8E6","DARK BLUE":"#00008B",NAVY:"#000080","ROYAL BLUE":"#4169E1","SKY BLUE":"#87CEEB","LIGHT GREEN":"#90EE90","DARK GREEN":"#006400",LIME:"#00FF00",OLIVE:"#808000","LIGHT GRAY":"#D3D3D3","DARK GRAY":"#A9A9A9",CHARCOAL:"#36454F"},A=s=>{if(!s)return"#CCCCCC";const e=s.toUpperCase().trim();if(F[e])return F[e];for(const[r,t]of Object.entries(F))if(e.includes(r)||r.includes(e))return t;return"#CCCCCC"};return j(()=>{z();const s=g.query.q||"",e=g.query.color||"",r=parseInt(g.query.page)||1,t=parseInt(g.query.limit)||20;s&&(p.value=s),e&&(i.value=e,c.value=e),t!==20&&(l.value.limit=t),h(r,!1)}),(s,e)=>{const r=X("router-link");return a(),n("div",ae,[o("header",re,[o("div",ne,[e[9]||(e[9]=o("h1",null,"Product Catalog",-1)),o("div",ie,[J(q).isAuthenticated?(a(),_(r,{key:1,to:"/products",class:"btn btn-login"},{default:R(()=>[...e[8]||(e[8]=[G("Go to Products",-1)])]),_:1})):(a(),_(r,{key:0,to:"/login",class:"btn btn-login"},{default:R(()=>[...e[7]||(e[7]=[G("Login",-1)])]),_:1}))])])]),o("main",ue,[o("div",ce,[o("div",de,[x(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),onInput:V,type:"text",placeholder:"Search by product name, description, or SKU...",class:"search-input"},null,544),[[B,p.value]]),e[10]||(e[10]=o("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[o("circle",{cx:"11",cy:"11",r:"8","stroke-width":"2"}),o("path",{d:"m21 21-4.35-4.35","stroke-width":"2","stroke-linecap":"round"})],-1))]),o("button",{onClick:e[1]||(e[1]=t=>k.value=!k.value),class:"btn btn-filter"},[...e[11]||(e[11]=[Z('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-ea328b2b><line x1="4" y1="21" x2="4" y2="14" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="4" y1="10" x2="4" y2="3" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="12" y1="21" x2="12" y2="12" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="12" y1="8" x2="12" y2="3" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="20" y1="21" x2="20" y2="16" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="20" y1="12" x2="20" y2="3" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="1" y1="14" x2="7" y2="14" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="9" y1="8" x2="15" y2="8" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line><line x1="17" y1="16" x2="23" y2="16" stroke-width="2" stroke-linecap="round" data-v-ea328b2b></line></svg> Filters ',2)])])]),k.value?(a(),n("div",ve,[o("div",pe,[e[12]||(e[12]=o("label",{for:"color-search",class:"filter-label"},"Filter by Color:",-1)),o("div",he,[x(o("input",{id:"color-search","onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),onInput:K,onFocus:e[3]||(e[3]=t=>d.value=!0),onBlur:Y,type:"text",placeholder:"Type to search colors (min 3 characters)...",class:"color-search-input"},null,544),[[B,c.value]]),i.value?(a(),n("button",{key:0,onClick:$,class:"clear-color-btn",title:"Clear color filter"}," × ")):y("",!0),d.value&&L.value.length>0?(a(),n("div",fe,[(a(!0),n(T,null,I(L.value,t=>(a(),n("div",{key:t.color,onMousedown:te(f=>H(t.color),["prevent"]),class:"color-option"},[o("div",{class:"color-swatch-small",style:D({background:A(t.color)})},null,4),o("span",ge,v(t.color),1),o("span",be,"("+v(t.count)+")",1)],40,ye))),128))])):y("",!0)]),i.value?(a(),n("div",Ce,[o("div",{class:"color-swatch",style:D({background:A(i.value)}),title:i.value},null,12,ke),o("span",me,v(i.value),1)])):y("",!0)])])):y("",!0),w.value?(a(),n("div",we,[...e[13]||(e[13]=[o("div",{class:"spinner"},null,-1),o("p",null,"Searching products...",-1)])])):C.value?(a(),n("div",Fe,v(C.value),1)):b.value.length>0?(a(),n("div",_e,[o("div",xe,[e[14]||(e[14]=o("h2",null,"Search Results",-1)),o("span",Ee,v(l.value.total?.toLocaleString()||0)+" product"+v(l.value.total!==1?"s":"")+" found ",1)]),o("div",Se,[(a(!0),n(T,null,I(b.value,t=>(a(),_(se,{key:t.sku,product:t,"hide-view-button":!0},null,8,["product"]))),128))]),l.value.total>0?(a(),n("div",Le,[o("div",Pe,[o("button",{onClick:e[4]||(e[4]=t=>P(l.value.page-1)),disabled:l.value.page===1,class:"btn btn-page"}," ← Previous ",8,Ae),o("span",Re," Page "+v(l.value.page)+" of "+v(l.value.totalPages),1),o("button",{onClick:e[5]||(e[5]=t=>P(l.value.page+1)),disabled:l.value.page>=l.value.totalPages,class:"btn btn-page"}," Next → ",8,Be)]),o("div",Te,[e[16]||(e[16]=o("label",{for:"page-size"},"Items per page:",-1)),x(o("select",{id:"page-size","onUpdate:modelValue":e[6]||(e[6]=t=>l.value.limit=t),onChange:M},[...e[15]||(e[15]=[o("option",{value:10},"10",-1),o("option",{value:20},"20",-1),o("option",{value:50},"50",-1),o("option",{value:100},"100",-1)])],544),[[ee,l.value.limit]])])])):y("",!0)])):E.value?(a(),n("div",Ie,[...e[17]||(e[17]=[o("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[o("circle",{cx:"11",cy:"11",r:"8","stroke-width":"2"}),o("path",{d:"m21 21-4.35-4.35","stroke-width":"2","stroke-linecap":"round"})],-1),o("p",null,"No products found",-1),o("span",null,"Try adjusting your search or filters",-1)])])):(a(),n("div",De,[...e[18]||(e[18]=[o("h2",null,"Welcome to Product Search",-1),o("p",null,"Search through thousands of products by name, description, or SKU",-1)])]))])])}}},Me=le(Ne,[["__scopeId","data-v-ea328b2b"]]);export{Me as default};
